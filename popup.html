<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div id="app-container">
    <!-- Auth Section -->
    <div class="brand-plaque">JEMO LIFE</div>
    <div id="auth-container" class="card">
      <div class="card-header">AUTH_CONTROL</div>
      <h1>WELCOME</h1>
      <p>Sign in to your AppFlowy account to start clipping.</p>
      <div class="input-group">
        <span class="label">EMAIL</span>
        <input type="email" id="email" placeholder="ENTER EMAIL" required />
      </div>
      <div class="input-group">
        <span class="label">PASSWORD</span>
        <input type="password" id="password" placeholder="ENTER PASSWORD" required />
      </div>
      <button id="login-btn">SIGN IN</button>
    </div>

    <!-- Workspace Selection -->
    <div id="workspace-container" class="card" style="display: none">
      <div class="card-header">WORKSPACE_SELECT</div>
      <div class="step-indicator">
        <div class="step-dot active"></div>
        <div class="step-dot"></div>
        <div class="step-dot"></div>
      </div>
      <h1>WORKSPACE</h1>
      <p>Choose the workspace where you want to save your clips.</p>
      <span class="label">SELECT WORKSPACE</span>
      <select id="workspace-select">
        <option value="">CHOOSE A WORKSPACE...</option>
      </select>
    </div>

    <!-- Space Selection -->
    <div id="space-container" class="card" style="display: none">
      <div class="card-header">SPACE_CONFIG</div>
      <div class="step-indicator">
        <div class="step-dot active"></div>
        <div class="step-dot active"></div>
        <div class="step-dot"></div>
      </div>
      <h1>SELECT SPACE</h1>
      <p>Pick a folder or space for your new database.</p>
      <span class="label">DESTINATION FOLDER</span>
      <select id="space-select">
        <option value="">CHOOSE A SPACE...</option>
      </select>
    </div>

    <!-- Database Selection -->
    <div id="database-container" class="card" style="display: none">
      <div class="card-header">DATABASE_SELECT</div>
      <div class="step-indicator">
        <div class="step-dot active"></div>
        <div class="step-dot active"></div>
        <div class="step-dot active"></div>
      </div>
      <h1>SELECT DATABASE</h1>
      <p>Choose an existing database to save your clips.</p>
      
      <span class="label">DATABASE</span>
      <select id="database-select">
        <option value="">CHOOSE A DATABASE...</option>
      </select>

      <div class="fields-section" id="fields-preview" style="display: none;">
        <span class="label">EXTRACTED FIELDS</span>
        <ul id="fields-list">
          <!-- Populated dynamically -->
        </ul>
      </div>

      <button id="confirm-db-btn" style="display: none;">CONFIRM SELECTION</button>
      <button id="show-create-db-btn" class="secondary">CREATE NEW DATABASE</button>
    </div>

    <!-- Database Creation -->
    <div id="create-database-container" class="card" style="display: none">
      <div class="card-header">DATABASE_CREATE</div>
      <h1>NEW DATABASE</h1>
      <p>Create a new database for your clips.</p>

      <span class="label">DATABASE NAME</span>
      <input type="text" id="new-db-name" placeholder="ENTER NAME" />

      <button id="init-db-btn">CREATE & SELECT</button>
      <button id="back-to-select-db-btn" class="secondary">BACK TO SELECTION</button>
    </div>

    <!-- Clipper Section -->
    <div id="web-clipper" class="card" style="display: none">
      <div class="card-header">COMMAND_CENTER</div>
      <h1>WEB CLIPPER</h1>
      <p>Save the current page to AppFlowy.</p>
      
      <div class="info-tile">
        <span class="label">TARGET FOLDER</span>
        <div id="target-info" class="value"></div>
        <span class="label">DATABASE ID</span>
        <code id="database-id-display"></code>
        <button id="copy-id-btn" class="secondary">COPY ID</button>
      </div>

      <span class="label">URL</span>
      <input type="text" id="web-clipper-input" placeholder="ENTER URL" />
      <button id="web-clipper-btn">CLIP TO APPFLOWY</button>
      
      <button id="logout-btn" class="secondary">SIGN OUT</button>
    </div>

    <!-- Feedback Layer -->
    <p id="message"></p>
  </div>

  <script src="utils.js"></script>
  <script src="popup.js"></script>
</body>
</html>
